<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>行人重识别系统</title>
    <link href="../static/css/style.css" rel="stylesheet">
</head>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>

<body onload="init()" class="bg" style="background-image: url(static/img/bg2.jpg);">
    <h2 align="center" style="font-size: 50px;color: white">行人重识别系统</h2>
    <div class="block1">
        <form action="/upload_img" method="post" enctype="multipart/form-data">
            <!-- {% csrf_token %}
            <a href="javascript:;" class="file" style="margin-left: 20px; float: left">
                <input type="file" name="video">点击这里上传视频
            </a> -->
            {% csrf_token %}
            <a href="javascript:;" class="file" style="margin-left: 20px; float: left">
                <input type="file" name="img">点击这里上传图片
            </a>
            <input class="input1" type="submit" value="上传"
                style="margin-left: 20px; width: 140px; background-color: #428bca;">
        </form>

        <select class="input1"
            style="text-align:center; text-align-last:center; margin-left: 20px; width: 140px; background-color: #5cb85c;">
            <option value="select1">选择摄像头</option>
            <option value="select2">1</option>
            <option value="select3">2</option>
            <option value="select3">3</option>
        </select>
        <button class="input1" style="margin-left: 20px; width: 150px;" onclick="btnTest_Click()">开始处理
            <script>
                var cnt = 0;
                var time = 43;
                function clock() {

                    document.getElementById("clock").value = "02:" + time;
                    var n = document.getElementById("number");
                    var p = cnt / 7;
                    p = p.toFixed(2);
                    n.value = p + "%"
                    var progress = document.getElementById("progress");
                    progress.style.width = cnt + "px";
                    cnt += 5;
                    time -= 1;
                }
                function btnTest_Click() {
                    alert("开始处理！");
                    var int = self.setInterval("clock()", 1000);
                }
            </script>
        </button>
        <a href="https://www.baidu.com" class="input1"
            style="float: left; line-height: 30px; background-color: #f0ad4e;  width: 150px; margin-left: 20px;">三维示踪</a>
        <!-- {% if messages %}
        <script>
            {% for msg in messages %}
            alert('{{ msg.message }}');
            {% endfor %}
        </script>
        {% endif %} -->
        <div class="video1">
            <!-- <video src="{{ test_video }}" type="video/mp4" poster="img/bg.jpg" autoplay="autoplay" controls="controls" -->
            <!-- <video src="static/output/nanyi2_out.mp4" type="video/mp4" poster="img/bg.jpg" autoplay="autoplay" controls="controls"
                loop="-1" style="height: 400px; width: 600px;">
                <p>你的浏览器不支持video标签.</p>
            </video> -->
            <img src="http://127.0.0.1:8000/video_feed" style="height: 400px; width: 640px;">
            <!-- <img src="static/img/query.jpg" style="margin-left: 10px; height: 400px; width: 160px;"> -->
            <img src="{{ test_img }}" style="margin-left: 10px; height: 400px; width: 160px;">
        </div>

    </div>

    <div class="block2">
        
        <h2 align="center" style="margin-top: 10px;font-size: 30px;color: white">密切接触者</h2>
        <!-- <a href="/preview" class="input1"
            style="line-height: 30px; background-color: #5cb85c; width: 200px; margin-left: 80px;">预览</a> -->
        <!-- <button class="input1" style="margin-left: 80px; width: 200px;" onclick="btnTest_Click()">开始处理
            <script>
                var cnt = 0;
                var time = 43;
                function clock() {

                    document.getElementById("clock").value = "02:" + time;
                    var n = document.getElementById("number");
                    var p = cnt / 7;
                    p = p.toFixed(2);
                    n.value = p + "%"
                    var progress = document.getElementById("progress");
                    progress.style.width = cnt + "px";
                    cnt += 5;
                    time -= 1;
                }
                function btnTest_Click() {
                    alert("开始处理！");
                    var int = self.setInterval("clock()", 1000);
                }
            </script>
        </button>
        <a href="https://www.baidu.com" class="input1"
            style="float: left; line-height: 30px; background-color: #f0ad4e;  width: 200px; margin-left: 80px;">三维示踪</a> -->
        <!-- <div class="video1"> -->
            <!-- <video src="{{ output_video }}" type="video/mp4" poster="img/bg.jpg" autoplay="autoplay" controls="controls"
                loop="-1" style="height: 100%; width: 100%;">
                <p>你的浏览器不支持video标签.</p>
            </video> -->
        <!-- </div> -->
        <!-- <img class="img1" src="static/img/danger/1.jpg">
        <img class="img1" src="static/img/danger/2.jpg">
        <img class="img1" src="static/img/danger/3.jpg">
        <img class="img1" src="static/img/danger/4.jpg"> -->
        <div class="imgs" id="imgs"></div>

    </div>

    <div class="input2" style="line-height: 30px;">处理进度：</div>
    <div id="progress" class="progress" style="width: 300px; background-color: #5cb85c;"></div>
    <input type="text" id="clock" class="progress" style="float: right; line-height: 30px; margin-right: 30px;">
    <div class="input2" style="float: right; line-height: 30px;">剩余时间：</div>
    <input type="text" id="number" class="progress"
        style="width: 95px; float: right; line-height: 30px; color: #5cb85c;">


    <script src="static/js/loadimage.js"></script>
    <script>
        function init() {
            document.getElementById("clock").value = "00:00";
            var n = document.getElementById("number");
            n.value = "100.00%"
            var progress = document.getElementById("progress");
            progress.style.width = 850 + "px";
        }
    </script>
</body>

</html>